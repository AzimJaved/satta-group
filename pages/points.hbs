{{> header }}

<section>
    <script>
        function onLoad(){
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                let points = xhttp.response
                for(category in points){
                        var html = ""
                        for(player in points[category].players){
                            let txt = "<tr><td>"+player+"</td><td>"+points[category].players[player]+"</td></tr>"
                            html += txt
                        }
                        document.getElementById(category).innerHTML += '<table><tr><th>Name</th><th>Points</th></tr>' + html +'</table>';
                    }
                }
            }
        xhttp.responseType = "json"
        xhttp.open("GET", "/pointsTable", true);
        xhttp.send(); 
        }
        window.onload = onLoad
    </script>
    <div class = "container">
        <h4>Cumulative Points</h4>
        <div id = "totalPoints">
        </div>
        <h4>Current Match Points</h4>
        <div id="todaysPoints">  
        </div>
    </div>
</section>

{{> footer }}